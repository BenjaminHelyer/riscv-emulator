\hypertarget{classriscv__emulator_1_1_control_unit}{}\doxysection{riscv\+\_\+emulator\+::Control\+Unit Class Reference}
\label{classriscv__emulator_1_1_control_unit}\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}


Class for the control unit, which is the decision-\/making heart of the processor.  




{\ttfamily \#include $<$control\+Unit.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a6ebe6090821473bb5dc5db224f89c6a0}\label{classriscv__emulator_1_1_control_unit_a6ebe6090821473bb5dc5db224f89c6a0}} 
void {\bfseries increment\+\_\+pc} ()
\begin{DoxyCompactList}\small\item\em Increments the PC by copying the contents of the PC then incrementing the resulting boolean array. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a7433eded2bcf9fc0986aac6a04aaed92}\label{classriscv__emulator_1_1_control_unit_a7433eded2bcf9fc0986aac6a04aaed92}} 
void {\bfseries decrement\+\_\+pc} ()
\begin{DoxyCompactList}\small\item\em Decrements the PC by copying the contents of the PC then incrementing the resulting boolean array. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a170260143d97b4fe1c292f90526c3c88}\label{classriscv__emulator_1_1_control_unit_a170260143d97b4fe1c292f90526c3c88}} 
void {\bfseries adjust\+\_\+\+PC\+\_\+with\+\_\+address} (unsigned int address)
\begin{DoxyCompactList}\small\item\em Adjusts the PC based on a given PC-\/relative address. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_ad9eb3588a84a01c8e5a3edc804036eb0}{increment\+\_\+bool}} (bool bool\+\_\+to\+\_\+increment\mbox{[}REGISTER\+\_\+\+BITS\mbox{]})
\begin{DoxyCompactList}\small\item\em Function for incrementing a boolean array. Note that this function alters the array that is passed to it. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a6002d19461636bb6e684560f30fb4ac8}\label{classriscv__emulator_1_1_control_unit_a6002d19461636bb6e684560f30fb4ac8}} 
void {\bfseries decrement\+\_\+bool} (bool bool\+\_\+to\+\_\+decrement\mbox{[}REGISTER\+\_\+\+BITS\mbox{]})
\begin{DoxyCompactList}\small\item\em Function for decrementing a boolean array. Note that this function alters the array that is passed to it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_aa2b9ec244bb6a3b0eeea3102f98a1b57}{add\+\_\+to\+\_\+bool}} (bool bool\+\_\+to\+\_\+add\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, unsigned int immediate)
\begin{DoxyCompactList}\small\item\em Function for adding an immediate value to a boolean array. Note that this function alters the array that is passed to it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_ae9b77566fc9c08650040dfa90e11ed66}{add\+\_\+boolean\+\_\+arrays}} (bool bool0\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, bool bool1\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, bool array\+\_\+to\+\_\+update\mbox{[}REGISTER\+\_\+\+BITS\mbox{]})
\begin{DoxyCompactList}\small\item\em Function for adding two boolean arrays together, saving the result to the third array. Note that this function alters the third array passed to it. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_a852705dfe821c4b4d568868af12da58e}{compare\+\_\+two\+\_\+bools\+\_\+signed}} (bool bool0\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, bool bool1\mbox{[}REGISTER\+\_\+\+BITS\mbox{]})
\begin{DoxyCompactList}\small\item\em Function for comparing two boolean arrays which returns -\/1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_ac357775cfc25410ab12e545c63592d20}{compare\+\_\+two\+\_\+bools\+\_\+unsigned}} (bool bool0\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, bool bool1\mbox{[}REGISTER\+\_\+\+BITS\mbox{]})
\begin{DoxyCompactList}\small\item\em Function for comparing two boolean arrays in an unsigned manner. Returns -\/1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_ad82cf958ef9754410bfb691056eed645}{logical\+\_\+xor}} (bool bool0, bool bool1)
\begin{DoxyCompactList}\small\item\em Logical function for computing XOR on two bits. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a34b0ed882d4c3a4f3feb32ef09ada207}\label{classriscv__emulator_1_1_control_unit_a34b0ed882d4c3a4f3feb32ef09ada207}} 
void {\bfseries arraywise\+\_\+xor} (bool bool0\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, bool bool1\mbox{[}REGISTER\+\_\+\+BITS\mbox{]}, bool array\+\_\+for\+\_\+result\mbox{[}REGISTER\+\_\+\+BITS\mbox{]})
\begin{DoxyCompactList}\small\item\em Applies the XOR function across two boolean arrays, bit by bit. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classriscv__emulator_1_1_control_unit_ab0ad7748b0c86b046aea42526d31eb6f}{execute\+\_\+instruction}} (\mbox{\hyperlink{classriscv__emulator_1_1_riscv_instruction}{Riscv\+Instruction}} ctrl\+Instruction)
\begin{DoxyCompactList}\small\item\em The function to call by which the control unit executes an instruction. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a13230d3e9caf5657b37deb605101acd1}\label{classriscv__emulator_1_1_control_unit_a13230d3e9caf5657b37deb605101acd1}} 
\mbox{\hyperlink{classriscv__emulator_1_1_data_memory}{Data\+Memory}} $\ast$ {\bfseries ctrl\+Data\+Mem} = nullptr
\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_ab43a27921062ea3fae758cafcfc4cc66}\label{classriscv__emulator_1_1_control_unit_ab43a27921062ea3fae758cafcfc4cc66}} 
\mbox{\hyperlink{classriscv__emulator_1_1_register}{Register}} $\ast$ {\bfseries ctrl\+PC} = nullptr
\item 
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_aa617354a072835f013c399f0bb9f11ec}\label{classriscv__emulator_1_1_control_unit_aa617354a072835f013c399f0bb9f11ec}} 
\mbox{\hyperlink{classriscv__emulator_1_1_register}{Register}} $\ast$ {\bfseries ctrl\+Registers} \mbox{[}32\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class for the control unit, which is the decision-\/making heart of the processor. 

This class includes peripherals as pointers rather than members. Rationale\+: the types of peripherals should be able to be adjusted as part of the overall processor without affecting the control unit.

Functions that depend on the type of instruction are implemented here rather than in the \mbox{\hyperlink{classriscv__emulator_1_1_riscv_instruction}{Riscv\+Instruction}} class. Rationale\+: Instruction type is determined at the level of the control unit rather than at the level of the instruction itself. Thus, defining functions for all instructions which are only valid for specific instruction types might lead to confusing or outright incorrect results. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_ae9b77566fc9c08650040dfa90e11ed66}\label{classriscv__emulator_1_1_control_unit_ae9b77566fc9c08650040dfa90e11ed66}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!add\_boolean\_arrays@{add\_boolean\_arrays}}
\index{add\_boolean\_arrays@{add\_boolean\_arrays}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{add\_boolean\_arrays()}{add\_boolean\_arrays()}}
{\footnotesize\ttfamily void riscv\+\_\+emulator\+::\+Control\+Unit\+::add\+\_\+boolean\+\_\+arrays (\begin{DoxyParamCaption}\item[{bool}]{bool0\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]},  }\item[{bool}]{bool1\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]},  }\item[{bool}]{array\+\_\+to\+\_\+update\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]} }\end{DoxyParamCaption})}



Function for adding two boolean arrays together, saving the result to the third array. Note that this function alters the third array passed to it. 

This function also works in a sign-\/extended manner, making it consistent with RISC-\/V\textquotesingle{}s sign-\/extended behavior. \mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_aa2b9ec244bb6a3b0eeea3102f98a1b57}\label{classriscv__emulator_1_1_control_unit_aa2b9ec244bb6a3b0eeea3102f98a1b57}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!add\_to\_bool@{add\_to\_bool}}
\index{add\_to\_bool@{add\_to\_bool}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{add\_to\_bool()}{add\_to\_bool()}}
{\footnotesize\ttfamily void riscv\+\_\+emulator\+::\+Control\+Unit\+::add\+\_\+to\+\_\+bool (\begin{DoxyParamCaption}\item[{bool}]{bool\+\_\+to\+\_\+add\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]},  }\item[{unsigned int}]{immediate }\end{DoxyParamCaption})}



Function for adding an immediate value to a boolean array. Note that this function alters the array that is passed to it. 

Based on the sign-\/extended incrementation function, this function also works in a sign-\/extended manner, assuming that the immediate passed to it is unsigned. Thus, an int value over 2$^\wedge$31 -\/ 1 will act as a negative value for this function, adding a negative value instead of a positive value. This behavior makes this function consistent with RISC-\/V\textquotesingle{}s sign-\/extended behavior.

Recursively increments the boolean array rather than converting to an int then converting back again. Implemented in this manner for the same reasons we implemented increment\+\_\+bool in its manner. \mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_a852705dfe821c4b4d568868af12da58e}\label{classriscv__emulator_1_1_control_unit_a852705dfe821c4b4d568868af12da58e}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!compare\_two\_bools\_signed@{compare\_two\_bools\_signed}}
\index{compare\_two\_bools\_signed@{compare\_two\_bools\_signed}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{compare\_two\_bools\_signed()}{compare\_two\_bools\_signed()}}
{\footnotesize\ttfamily int riscv\+\_\+emulator\+::\+Control\+Unit\+::compare\+\_\+two\+\_\+bools\+\_\+signed (\begin{DoxyParamCaption}\item[{bool}]{bool0\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]},  }\item[{bool}]{bool1\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]} }\end{DoxyParamCaption})}



Function for comparing two boolean arrays which returns -\/1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal. 

This abstraction is useful for representing any comparison operation, which will allow us to have just one C++ function for comparing values even when there are multiple RISC-\/V functions for this. Rationale\+: ease of implmenetation on the C++ side. This may be changed later if a more accurate abstraction is desired.

The comparison is implemented by beginning at the end of each bool rather than the beginning. This allows quick determination for numbers that differ in sign. For this reason it seems that on average this implementation has a faster runtime than starting at the beginning. The worst-\/case runtime is still the same for both. \mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_ac357775cfc25410ab12e545c63592d20}\label{classriscv__emulator_1_1_control_unit_ac357775cfc25410ab12e545c63592d20}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!compare\_two\_bools\_unsigned@{compare\_two\_bools\_unsigned}}
\index{compare\_two\_bools\_unsigned@{compare\_two\_bools\_unsigned}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{compare\_two\_bools\_unsigned()}{compare\_two\_bools\_unsigned()}}
{\footnotesize\ttfamily int riscv\+\_\+emulator\+::\+Control\+Unit\+::compare\+\_\+two\+\_\+bools\+\_\+unsigned (\begin{DoxyParamCaption}\item[{bool}]{bool0\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]},  }\item[{bool}]{bool1\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]} }\end{DoxyParamCaption})}



Function for comparing two boolean arrays in an unsigned manner. Returns -\/1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal. 

Similar implementation to compare\+\_\+two\+\_\+bools\+\_\+signed, except that the sign bit is simply compared rather than being checked for positive or negative. \mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_ab0ad7748b0c86b046aea42526d31eb6f}\label{classriscv__emulator_1_1_control_unit_ab0ad7748b0c86b046aea42526d31eb6f}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!execute\_instruction@{execute\_instruction}}
\index{execute\_instruction@{execute\_instruction}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{execute\_instruction()}{execute\_instruction()}}
{\footnotesize\ttfamily void riscv\+\_\+emulator\+::\+Control\+Unit\+::execute\+\_\+instruction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classriscv__emulator_1_1_riscv_instruction}{Riscv\+Instruction}}}]{ctrl\+Instruction }\end{DoxyParamCaption})}



The function to call by which the control unit executes an instruction. 

Expected usage\+: processor hands the control unit an instruction via execute\+\_\+instruction. The control unit then handles setting the program counter for the next instruction The control unit does not adjust the instruction memory; it is only handed one instruction at a time by the processor. The control unit can affect the data memory, program counter, and all the other registers. \mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_ad9eb3588a84a01c8e5a3edc804036eb0}\label{classriscv__emulator_1_1_control_unit_ad9eb3588a84a01c8e5a3edc804036eb0}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!increment\_bool@{increment\_bool}}
\index{increment\_bool@{increment\_bool}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{increment\_bool()}{increment\_bool()}}
{\footnotesize\ttfamily void riscv\+\_\+emulator\+::\+Control\+Unit\+::increment\+\_\+bool (\begin{DoxyParamCaption}\item[{bool}]{bool\+\_\+to\+\_\+increment\mbox{[}\+REGISTER\+\_\+\+BITS\mbox{]} }\end{DoxyParamCaption})}



Function for incrementing a boolean array. Note that this function alters the array that is passed to it. 

Sign-\/extended incrementation for a boolean array. Thus, a bool which is the max. positive value will be \char`\"{}incremented\char`\"{} to the max. negative value. All other incrementations are positive addition except for this sign flip.

Implemented addition in this way because the average runtime for incrementing an array in this way is better than converting a boolean array to an int then converting the int back into an array. In fact, for converting a boolean array to an int, the runtime would consistently be the length of the array. Thus, the runtime for converting an array to an int and back again would be twice the worst-\/case runtime for addition in this method. \mbox{\Hypertarget{classriscv__emulator_1_1_control_unit_ad82cf958ef9754410bfb691056eed645}\label{classriscv__emulator_1_1_control_unit_ad82cf958ef9754410bfb691056eed645}} 
\index{riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}!logical\_xor@{logical\_xor}}
\index{logical\_xor@{logical\_xor}!riscv\_emulator::ControlUnit@{riscv\_emulator::ControlUnit}}
\doxysubsubsection{\texorpdfstring{logical\_xor()}{logical\_xor()}}
{\footnotesize\ttfamily bool riscv\+\_\+emulator\+::\+Control\+Unit\+::logical\+\_\+xor (\begin{DoxyParamCaption}\item[{bool}]{bool0,  }\item[{bool}]{bool1 }\end{DoxyParamCaption})}



Logical function for computing XOR on two bits. 

Made public since this might be useful to other classes and doesn\textquotesingle{}t affect anything in the control unit class directly. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
control\+Unit.\+h\end{DoxyCompactItemize}
