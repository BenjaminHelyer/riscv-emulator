<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>riscv-emulator: riscv_emulator::ControlUnit Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">riscv-emulator<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>riscv_emulator</b></li><li class="navelem"><a class="el" href="classriscv__emulator_1_1_control_unit.html">ControlUnit</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classriscv__emulator_1_1_control_unit-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">riscv_emulator::ControlUnit Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class for the control unit, which is the decision-making heart of the processor.  
 <a href="classriscv__emulator_1_1_control_unit.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="control_unit_8h_source.html">controlUnit.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6ebe6090821473bb5dc5db224f89c6a0"><td class="memItemLeft" align="right" valign="top"><a id="a6ebe6090821473bb5dc5db224f89c6a0" name="a6ebe6090821473bb5dc5db224f89c6a0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>increment_pc</b> ()</td></tr>
<tr class="memdesc:a6ebe6090821473bb5dc5db224f89c6a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the PC by copying the contents of the PC then incrementing the resulting boolean array. <br /></td></tr>
<tr class="separator:a6ebe6090821473bb5dc5db224f89c6a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7433eded2bcf9fc0986aac6a04aaed92"><td class="memItemLeft" align="right" valign="top"><a id="a7433eded2bcf9fc0986aac6a04aaed92" name="a7433eded2bcf9fc0986aac6a04aaed92"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>decrement_pc</b> ()</td></tr>
<tr class="memdesc:a7433eded2bcf9fc0986aac6a04aaed92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrements the PC by copying the contents of the PC then incrementing the resulting boolean array. <br /></td></tr>
<tr class="separator:a7433eded2bcf9fc0986aac6a04aaed92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a170260143d97b4fe1c292f90526c3c88"><td class="memItemLeft" align="right" valign="top"><a id="a170260143d97b4fe1c292f90526c3c88" name="a170260143d97b4fe1c292f90526c3c88"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>adjust_PC_with_address</b> (unsigned int address)</td></tr>
<tr class="memdesc:a170260143d97b4fe1c292f90526c3c88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjusts the PC based on a given PC-relative address. <br /></td></tr>
<tr class="separator:a170260143d97b4fe1c292f90526c3c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9eb3588a84a01c8e5a3edc804036eb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classriscv__emulator_1_1_control_unit.html#ad9eb3588a84a01c8e5a3edc804036eb0">increment_bool</a> (bool bool_to_increment[REGISTER_BITS])</td></tr>
<tr class="memdesc:ad9eb3588a84a01c8e5a3edc804036eb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for incrementing a boolean array. Note that this function alters the array that is passed to it.  <a href="classriscv__emulator_1_1_control_unit.html#ad9eb3588a84a01c8e5a3edc804036eb0">More...</a><br /></td></tr>
<tr class="separator:ad9eb3588a84a01c8e5a3edc804036eb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6002d19461636bb6e684560f30fb4ac8"><td class="memItemLeft" align="right" valign="top"><a id="a6002d19461636bb6e684560f30fb4ac8" name="a6002d19461636bb6e684560f30fb4ac8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>decrement_bool</b> (bool bool_to_decrement[REGISTER_BITS])</td></tr>
<tr class="memdesc:a6002d19461636bb6e684560f30fb4ac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for decrementing a boolean array. Note that this function alters the array that is passed to it. <br /></td></tr>
<tr class="separator:a6002d19461636bb6e684560f30fb4ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b9ec244bb6a3b0eeea3102f98a1b57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classriscv__emulator_1_1_control_unit.html#aa2b9ec244bb6a3b0eeea3102f98a1b57">add_to_bool</a> (bool bool_to_add[REGISTER_BITS], unsigned int immediate)</td></tr>
<tr class="memdesc:aa2b9ec244bb6a3b0eeea3102f98a1b57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for adding an immediate value to a boolean array. Note that this function alters the array that is passed to it.  <a href="classriscv__emulator_1_1_control_unit.html#aa2b9ec244bb6a3b0eeea3102f98a1b57">More...</a><br /></td></tr>
<tr class="separator:aa2b9ec244bb6a3b0eeea3102f98a1b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852705dfe821c4b4d568868af12da58e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classriscv__emulator_1_1_control_unit.html#a852705dfe821c4b4d568868af12da58e">compare_two_bools_signed</a> (bool bool0[REGISTER_BITS], bool bool1[REGISTER_BITS])</td></tr>
<tr class="memdesc:a852705dfe821c4b4d568868af12da58e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for comparing two boolean arrays which returns -1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal.  <a href="classriscv__emulator_1_1_control_unit.html#a852705dfe821c4b4d568868af12da58e">More...</a><br /></td></tr>
<tr class="separator:a852705dfe821c4b4d568868af12da58e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac357775cfc25410ab12e545c63592d20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classriscv__emulator_1_1_control_unit.html#ac357775cfc25410ab12e545c63592d20">compare_two_bools_unsigned</a> (bool bool0[REGISTER_BITS], bool bool1[REGISTER_BITS])</td></tr>
<tr class="memdesc:ac357775cfc25410ab12e545c63592d20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for comparing two boolean arrays in an unsigned manner. Returns -1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal.  <a href="classriscv__emulator_1_1_control_unit.html#ac357775cfc25410ab12e545c63592d20">More...</a><br /></td></tr>
<tr class="separator:ac357775cfc25410ab12e545c63592d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad82cf958ef9754410bfb691056eed645"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classriscv__emulator_1_1_control_unit.html#ad82cf958ef9754410bfb691056eed645">logical_xor</a> (bool bool0, bool bool1)</td></tr>
<tr class="memdesc:ad82cf958ef9754410bfb691056eed645"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logical function for computing XOR on two bits.  <a href="classriscv__emulator_1_1_control_unit.html#ad82cf958ef9754410bfb691056eed645">More...</a><br /></td></tr>
<tr class="separator:ad82cf958ef9754410bfb691056eed645"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b0ed882d4c3a4f3feb32ef09ada207"><td class="memItemLeft" align="right" valign="top"><a id="a34b0ed882d4c3a4f3feb32ef09ada207" name="a34b0ed882d4c3a4f3feb32ef09ada207"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>arraywise_xor</b> (bool bool0[REGISTER_BITS], bool bool1[REGISTER_BITS], bool array_for_result[REGISTER_BITS])</td></tr>
<tr class="memdesc:a34b0ed882d4c3a4f3feb32ef09ada207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the XOR function across two boolean arrays, bit by bit. <br /></td></tr>
<tr class="separator:a34b0ed882d4c3a4f3feb32ef09ada207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ad7748b0c86b046aea42526d31eb6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classriscv__emulator_1_1_control_unit.html#ab0ad7748b0c86b046aea42526d31eb6f">execute_instruction</a> (<a class="el" href="classriscv__emulator_1_1_riscv_instruction.html">RiscvInstruction</a> ctrlInstruction)</td></tr>
<tr class="memdesc:ab0ad7748b0c86b046aea42526d31eb6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function to call by which the control unit executes an instruction.  <a href="classriscv__emulator_1_1_control_unit.html#ab0ad7748b0c86b046aea42526d31eb6f">More...</a><br /></td></tr>
<tr class="separator:ab0ad7748b0c86b046aea42526d31eb6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a13230d3e9caf5657b37deb605101acd1"><td class="memItemLeft" align="right" valign="top"><a id="a13230d3e9caf5657b37deb605101acd1" name="a13230d3e9caf5657b37deb605101acd1"></a>
<a class="el" href="classriscv__emulator_1_1_data_memory.html">DataMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>ctrlDataMem</b> = nullptr</td></tr>
<tr class="separator:a13230d3e9caf5657b37deb605101acd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab43a27921062ea3fae758cafcfc4cc66"><td class="memItemLeft" align="right" valign="top"><a id="ab43a27921062ea3fae758cafcfc4cc66" name="ab43a27921062ea3fae758cafcfc4cc66"></a>
<a class="el" href="classriscv__emulator_1_1_register.html">Register</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>ctrlPC</b> = nullptr</td></tr>
<tr class="separator:ab43a27921062ea3fae758cafcfc4cc66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa617354a072835f013c399f0bb9f11ec"><td class="memItemLeft" align="right" valign="top"><a id="aa617354a072835f013c399f0bb9f11ec" name="aa617354a072835f013c399f0bb9f11ec"></a>
<a class="el" href="classriscv__emulator_1_1_register.html">Register</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>ctrlRegisters</b> [32]</td></tr>
<tr class="separator:aa617354a072835f013c399f0bb9f11ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class for the control unit, which is the decision-making heart of the processor. </p>
<p >This class includes peripherals as pointers rather than members. Rationale: the types of peripherals should be able to be adjusted as part of the overall processor without affecting the control unit.</p>
<p >Functions that depend on the type of instruction are implemented here rather than in the <a class="el" href="classriscv__emulator_1_1_riscv_instruction.html" title="Base class for RISC-V instruction.">RiscvInstruction</a> class. Rationale: Instruction type is determined at the level of the control unit rather than at the level of the instruction itself. Thus, defining functions for all instructions which are only valid for specific instruction types might lead to confusing or outright incorrect results. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa2b9ec244bb6a3b0eeea3102f98a1b57" name="aa2b9ec244bb6a3b0eeea3102f98a1b57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2b9ec244bb6a3b0eeea3102f98a1b57">&#9670;&nbsp;</a></span>add_to_bool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_emulator::ControlUnit::add_to_bool </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool_to_add</em>[REGISTER_BITS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>immediate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for adding an immediate value to a boolean array. Note that this function alters the array that is passed to it. </p>
<p >Based on the sign-extended incrementation function, this function also works in a sign-extended manner, assuming that the immediate passed to it is unsigned. Thus, an int value over 2^31 - 1 will act as a negative value for this function, adding a negative value instead of a positive value. This behavior makes this function consistent with RISC-V's sign-extended behavior.</p>
<p >Recursively increments the boolean array rather than converting to an int then converting back again. Implemented in this manner for the same reasons we implemented increment_bool in its manner. </p>

</div>
</div>
<a id="a852705dfe821c4b4d568868af12da58e" name="a852705dfe821c4b4d568868af12da58e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a852705dfe821c4b4d568868af12da58e">&#9670;&nbsp;</a></span>compare_two_bools_signed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int riscv_emulator::ControlUnit::compare_two_bools_signed </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool0</em>[REGISTER_BITS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool1</em>[REGISTER_BITS]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for comparing two boolean arrays which returns -1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal. </p>
<p >This abstraction is useful for representing any comparison operation, which will allow us to have just one C++ function for comparing values even when there are multiple RISC-V functions for this. Rationale: ease of implmenetation on the C++ side. This may be changed later if a more accurate abstraction is desired.</p>
<p >The comparison is implemented by beginning at the end of each bool rather than the beginning. This allows quick determination for numbers that differ in sign. For this reason it seems that on average this implementation has a faster runtime than starting at the beginning. The worst-case runtime is still the same for both. </p>

</div>
</div>
<a id="ac357775cfc25410ab12e545c63592d20" name="ac357775cfc25410ab12e545c63592d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac357775cfc25410ab12e545c63592d20">&#9670;&nbsp;</a></span>compare_two_bools_unsigned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int riscv_emulator::ControlUnit::compare_two_bools_unsigned </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool0</em>[REGISTER_BITS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool1</em>[REGISTER_BITS]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for comparing two boolean arrays in an unsigned manner. Returns -1 if the first argument is greater, 1 if the second argument is greater, and 0 if the bools are equal. </p>
<p >Similar implementation to compare_two_bools_signed, except that the sign bit is simply compared rather than being checked for positive or negative. </p>

</div>
</div>
<a id="ab0ad7748b0c86b046aea42526d31eb6f" name="ab0ad7748b0c86b046aea42526d31eb6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0ad7748b0c86b046aea42526d31eb6f">&#9670;&nbsp;</a></span>execute_instruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_emulator::ControlUnit::execute_instruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classriscv__emulator_1_1_riscv_instruction.html">RiscvInstruction</a>&#160;</td>
          <td class="paramname"><em>ctrlInstruction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function to call by which the control unit executes an instruction. </p>
<p >Expected usage: processor hands the control unit an instruction via execute_instruction. The control unit then handles setting the program counter for the next instruction The control unit does not adjust the instruction memory; it is only handed one instruction at a time by the processor. The control unit can affect the data memory, program counter, and all the other registers. </p>

</div>
</div>
<a id="ad9eb3588a84a01c8e5a3edc804036eb0" name="ad9eb3588a84a01c8e5a3edc804036eb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9eb3588a84a01c8e5a3edc804036eb0">&#9670;&nbsp;</a></span>increment_bool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_emulator::ControlUnit::increment_bool </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool_to_increment</em>[REGISTER_BITS]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for incrementing a boolean array. Note that this function alters the array that is passed to it. </p>
<p >Sign-extended incrementation for a boolean array. Thus, a bool which is the max. positive value will be "incremented" to the max. negative value. All other incrementations are positive addition except for this sign flip.</p>
<p >Implemented addition in this way because the average runtime for incrementing an array in this way is better than converting a boolean array to an int then converting the int back into an array. In fact, for converting a boolean array to an int, the runtime would consistently be the length of the array. Thus, the runtime for converting an array to an int and back again would be twice the worst-case runtime for addition in this method. </p>

</div>
</div>
<a id="ad82cf958ef9754410bfb691056eed645" name="ad82cf958ef9754410bfb691056eed645"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad82cf958ef9754410bfb691056eed645">&#9670;&nbsp;</a></span>logical_xor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool riscv_emulator::ControlUnit::logical_xor </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bool1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logical function for computing XOR on two bits. </p>
<p >Made public since this might be useful to other classes and doesn't affect anything in the control unit class directly. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="control_unit_8h_source.html">controlUnit.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
